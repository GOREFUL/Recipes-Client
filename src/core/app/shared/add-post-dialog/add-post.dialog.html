<!-- src/core/app/shared/add-post-dialog/add-post.dialog.html -->
<div class="card p-5">
  <h2 class="text-xl font-semibold mb-4" style="color:var(--text)">Add New Post</h2>

  <form [formGroup]="formGroup" (ngSubmit)="onSubmit()" class="space-y-4">
    <!-- Dish -->
    <mat-form-field class="w-full" appearance="fill">
      <mat-label>Dish*</mat-label>
      <mat-select formControlName="dishId" required>
        <mat-option *ngIf="!dishes.length" disabled>– no dishes yet –</mat-option>
        <mat-option *ngFor="let dish of dishes" [value]="dish.id">
          {{ dish.name }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="f.dishId.touched && f.dishId.invalid">Please select a dish</mat-error>
    </mat-form-field>

    <!-- Title -->
    <mat-form-field class="w-full" appearance="fill">
      <mat-label>Title*</mat-label>
      <input matInput formControlName="title" required />
      <mat-hint>e.g. My Favorite Recipe</mat-hint>
      <mat-error *ngIf="f.title.touched && f.title.invalid">Title is required</mat-error>
    </mat-form-field>

    <!-- Description -->
    <mat-form-field class="w-full" appearance="fill">
      <mat-label>Description</mat-label>
      <textarea matInput rows="3" formControlName="description"></textarea>
      <mat-hint align="end">{{ (f.description.value?.length || 0) }}/500</mat-hint>
      <mat-error *ngIf="f.description.hasError('maxlength')">Max 500 characters</mat-error>
    </mat-form-field>

    <!-- Image/Video URL -->
    <mat-form-field class="w-full" appearance="fill">
      <mat-label>Media URL*</mat-label>
      <input matInput formControlName="mediaUrl" required />
      <mat-hint>https://… (image or video)</mat-hint>
      <mat-error *ngIf="f.mediaUrl.touched && f.mediaUrl.invalid">
        Please enter a valid URL
      </mat-error>
    </mat-form-field>

    <div class="flex justify-end gap-2 pt-2">
      <button type="button" class="btn btn-ghost" (click)="onClose()">Cancel</button>
      <button type="submit" class="btn btn-primary" [disabled]="formGroup.invalid">
        Add Post
      </button>
    </div>
  </form>
</div>
