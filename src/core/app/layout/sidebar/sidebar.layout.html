<div class="h-full p-3 overflow-y-auto"
     style="background: linear-gradient(180deg, var(--bg-soft), var(--bg) 120%);
            border-right: 1px solid rgba(255,255,255,.08)">
  <div class="text-xs uppercase tracking-wider sidebar-muted mb-3">Menu</div>

  <mat-accordion class="sidebar-acc" multi>
    <ng-container *ngFor="let item of menuItems()">
      <ng-container *ngIf="item.children?.length; else singleItem">
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-icon class="mr-2">{{ item.icon }}</mat-icon>
            <span>{{ item.title }}</span>
          </mat-expansion-panel-header>

          <div *ngFor="let child of item.children" class="ml-3 my-1">
            <a [routerLink]="child.route"
               routerLinkActive="nav-link-active"
               class="flex items-center gap-2 text-sm px-2 py-1 rounded sidebar-link">
              <mat-icon class="text-sm">{{ child.icon }}</mat-icon>
              {{ child.title }}
            </a>
          </div>
        </mat-expansion-panel>
      </ng-container>

      <ng-template #singleItem>
        <a [routerLink]="item.route"
           routerLinkActive="nav-link-active"
           class="flex items-center gap-3 py-2 px-2 rounded sidebar-link">
          <mat-icon>{{ item.icon }}</mat-icon>
          {{ item.title }}
        </a>
      </ng-template>
    </ng-container>
  </mat-accordion>
</div>
