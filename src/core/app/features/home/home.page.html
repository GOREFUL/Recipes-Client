<section class="w-full space-y-6">
  <div class="flex flex-wrap justify-between items-center gap-3 border-b pb-4 p-4">
    <h1 class="text-2xl font-bold" style="color: var(--text)">Fresh posts</h1>

    <div class="flex flex-wrap gap-2">
      <button class="btn btn-soft btn-lg" (click)="refresh()">
        <mat-icon>refresh</mat-icon><span>Refresh</span>
      </button>
    </div>
  </div>

  <ng-container *ngIf="postSrvc.freshPosts() as posts; else emptyState">
    <div *ngIf="posts.length; else emptyState" class="grid gap-4">
      <div
        *ngFor="let post of posts"
        class="flex items-start justify-between p-4 rounded-xl"
        style="background: var(--panel)"
      >
        <div class="cursor-pointer flex-1" (click)="open(post)">
          <div class="flex items-center gap-2">
            <h3 class="text-lg font-semibold">{{ post.name }}</h3>
            <span class="text-xs opacity-60" *ngIf="post.createdAt">
              {{ post.createdAt | date:'medium' }}
            </span>
          </div>

          <p class="opacity-70 mb-2">{{ post.description }}</p>

          <!-- media preview -->
          <div class="rounded-lg overflow-hidden border border-[rgba(255,255,255,0.06)] h-[220px] w-[220px]">
            <video *ngIf="isVideo(post.mediaUrl); else img" [src]="post.mediaUrl" class="w-full" muted playsinline controls></video>
            <ng-template #img>
              <img [src]="post.mediaUrl" class="w-full object-cover h-[220px] w-[220px]" />
            </ng-template>
          </div>

          <div class="text-xs opacity-60 truncate mt-2">{{ post.mediaUrl }}</div>
        </div>

        <div class="flex items-center gap-4 pl-4">
          <div class="flex items-center gap-1 opacity-80">
            <mat-icon>thumb_up</mat-icon>
            <span>{{ post.likes ?? 0 }}</span>
          </div>
          <div class="flex items-center gap-1 opacity-80">
            <mat-icon>thumb_down</mat-icon>
            <span>{{ post.dislikes ?? 0 }}</span>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <ng-template #emptyState>
    <div class="text-center py-20" style="color: var(--muted)">
      <mat-icon class="text-4xl mb-2">video_library</mat-icon>
      <p>No fresh posts yet.</p>
    </div>
  </ng-template>
</section>
